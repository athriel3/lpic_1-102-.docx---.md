**108.4 Управление печатью**

Студент должен уметь управлять очередью печати используя интерфейс CUPS
и LPD

Изучаем:

- базовую настройку CUPS;

- управлению очередью печати;

- устранение неполадок печати;

- управление заданиями принтера.

**CUPS** - сервер печати в \*nix системах. Может использоваться как
локальная система печати, и как сервер печати в ЛВС.

По умолчанию работает по порту **631**, может управляться через
веб-интерфейс.

Существующие протоколы печати делятся на два вида:

\- располагающие очередь печати на [стороне клиента]{.underline}
(простые протоколы, например, JetDirect, App Socket);

\- располагающе очередь печати на [стороне принтера]{.underline}
(сложное многофункциональное ПО, например CUPS).

Установка принтера PDF: ***sudo apt-get install cups-pdf***

Добавление через GUI настроек локального принтера по URI
***usb://Samsung/ML-2850***

Добавление через веб-интерфейс
[[http://localhost:631]{.underline}](http://localhost:631/) сетевого
принтера по URI ***socket://192.168.1.100:9100***

Переход в папку конфигурации cups: ***cd /etc/cups***

Мануал по cups: ***man cupsd.conf***

Редактирование файла конфигурации cups: ***sudo vi cupsd.conf***

Добавление пользователя в группу управления cups: ***sudo usermod -aG
lpadmin username***

Конфигурация отдельных принтеров: ***sudo vi printers.conf***

При отправке документа на печати создается очередь заданий, которая
находится в директории ***var/spool/cups***

Команды управления печатью:

***lpq*** - показать задания печати.

Например,

***lpq --a*** (задания на всех принтерах);

***lpq --PSamsung*** (задания на принтере Samsung);

***lpq*** (очередь на принтере по умолчанию).

***lpr*** - послать на печать.

Например,

***lpr --PHP pushkin.txt*** (послать документ pushkin.txt на принтер
HP).

***lprm*** - удалить задание печати.

Например,

***lprm 12*** (удалить задание № 12 из очереди печати);

***lprm --PHP -*** (удалить все задания для принтера HP).

***lpс*** - управление печатью;

Например,

***Lpc status all*** (посмотреть состояние всех принтеров).

***lpmove*** - перенос заданий печати.

Например,

***lpmove 14 Samsung*** (перенос задания №14 на принтер Samsung);

***lpmove Samsung HP*** (перенос всех заданий с принтера Samsung на
принтер HP).

***cupsaccept*** - включить очередь;

***cupsreject*** - выключить очередь (принтер становится недоступен и не
принимает задания на печать).

***cupsenable*** - включить печать;

***cupsdisable*** - выключить печать (притер принимает задания на
печать, но печать приостановлена).

Например,

***sudo cupsreject PDF*** (например, отключить очередь принтера PDF)

***sudo cupsdisable --r "Out of paper" PDF*** (например, отключить
печать на принтер PDF с указанием причины).
